name = "dev-celebrum-ai"
compatibility_date = "2024-05-18"

main = "src/container-entry.ts"

[[containers]]
name = "main"
image = "."
command = ["pnpm", "start"]

[site]
bucket = "../../packages/web/dist"
compatibility_flags = ["nodejs_compat"]

# KV Namespaces
[[kv_namespaces]]
binding = "ArbEdgeKV"
id = "1018c576bf664c15afe0c53d85df8ed0"
preview_id = "9db67fd132d64e93bcdf3cebebd07bc6"

[[kv_namespaces]]
binding = "PROD_BOT_MARKET_CACHE"
id = "c5b936f1c0eb4f50ae9519f64bd3c5d9"
preview_id = "9db67fd132d64e93bcdf3cebebd07bc6"

[[kv_namespaces]]
binding = "PROD_BOT_SESSION_STORE"
id = "d090d03b365b4619800d96ad1da5ac8c"
preview_id = "9db67fd132d64e93bcdf3cebebd07bc6"

# D1 Database
[[d1_databases]]
binding = "ArbEdgeD1"
database_name = "prod-celebrum-ai"
database_id = "879bf844-93b2-433d-9319-6e6065bbfdfd"
migrations_dir = "../db/sql/migrations"

# R2 Buckets (commented out - buckets not found)
# [[r2_buckets]]
# binding = "ArbEdgeR2"
# bucket_name = "prod-celebrum-ai"

# [[r2_buckets]]
# binding = "ArbEdgeR2_Analytics"
# bucket_name = "prod-celebrum-ai-analytics"

# Environment Variables
[vars]
ENVIRONMENT = "production"
LOG_LEVEL = "info"

# Development configuration
[dev.miniflare]
kv_persist = true
d1_persist = true